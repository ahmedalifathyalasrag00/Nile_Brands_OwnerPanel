<div class="min-h-screen bg-gray-50 p-4 md:p-8 font-sans md:ml-72">
  <div *ngIf="isLoading" class="fixed inset-0 bg-white/90 backdrop-blur-sm z-50 flex items-center justify-center">
    <div class="text-center space-y-4">
      <svg class="animate-spin h-12 w-12 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2
                 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135
                 5.824 3 7.938l3-2.647z"></path>
      </svg>
      <p class="text-primary font-medium">Loading Dashboard...</p>
    </div>
  </div>

  <div *ngIf="errorMessage" class="mb-8 bg-red-50 border border-red-200 rounded-xl p-4">
    <div class="flex items-center space-x-3">
      <svg class="w-5 h-5 text-red-500" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd"
              d="M10 18a8 8 0 100-16 8 8 0 000
                 16zM8.28 7.22a.75.75 0 00-1.06
                 1.06L8.94 10l-1.72 1.72a.75.75
                 0 101.06 1.06L10 11.06l1.72
                 1.72a.75.75 0 101.06-1.06L11.06
                 10l1.72-1.72a.75.75 0
                 00-1.06-1.06L10 8.94 8.28 7.22z"
              clip-rule="evenodd" />
      </svg>
      <p class="text-red-700 font-medium">{{ errorMessage }}</p>
    </div>
  </div>

  <div *ngIf="!isLoading && !errorMessage" class="space-y-8">
    <div class="flex items-center justify-between">
      <h1 class="text-2xl font-bold text-fontColor">Business Dashboard</h1>
      <div class="flex items-center space-x-4">
        <button class="flex items-center space-x-2 text-primary hover:text-primary/80">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path d="M13 8V2H7v6H2l8 8 8-8h-5zM0
                     18h20v2H0v-2z" />
          </svg>
          <span>Export Report</span>
        </button>
        <div class="h-8 w-px bg-secondary/20"></div>
      </div>
    </div>

    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4">
      <div class="bg-white rounded-xl p-6 shadow-card border border-gray-100">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-secondary mb-1">Total Sales</p>
            <p class="text-2xl font-bold text-primary">{{ dashboardData?.totalSales || 0 }}</p>
          </div>
          <div class="flex h-12 w-12 items-center justify-center rounded-xl">
            <svg width="65" height="65" viewBox="0 0 65 65" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M48.75 20.3125V16.25C48.75 7.28965
                       41.4602 0 32.5 0C23.5396 0 16.25
                       7.28965 16.25 16.25V20.3125H4.0625V54.8438C4.0625
                       60.4529 8.60958 65 14.2188 65H50.7812C56.3904
                       65 60.9375 60.4529 60.9375 54.8438V20.3125H48.75ZM24.375
                       16.25C24.375 11.7698 28.0198 8.125 32.5
                       8.125C36.9802 8.125 40.625 11.7698 40.625 16.25V20.3125H24.375V16.25ZM44.6875
                       31.4844C43.0047 31.4844 41.6406
                       30.1203 41.6406 28.4375C41.6406 26.7547
                       43.0047 25.3906 44.6875 25.3906C46.3703
                       25.3906 47.7344 26.7547 47.7344 28.4375C47.7344
                       30.1203 46.3703 31.4844 44.6875 31.4844ZM20.3125
                       31.4844C18.6297 31.4844 17.2656 30.1203
                       17.2656 28.4375C17.2656 26.7547 18.6297
                       25.3906 20.3125 25.3906C21.9953 25.3906
                       23.3594 26.7547 23.3594 28.4375C23.3594
                       30.1203 21.9953 31.4844 20.3125 31.4844Z"
                    fill="#FF6869" />
            </svg>
          </div>
        </div>
        <div class="mt-4 flex items-center space-x-2 text-sm">
          <span class="text-green-600 bg-green-50 px-2 py-1 rounded-full">
            <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                    d="M12 7a1 1 0 110-2h5a1 1 0
                       011 1v5a1 1 0 11-2 0V8.414l-4.293
                       4.293a1 1 0 01-1.414 0L8 10.414l-4.293
                       4.293a1 1 0 01-1.414-1.414l5-5a1 1 0
                       011.414 0L11 10.586 14.586 7H12z"
                    clip-rule="evenodd" />
            </svg>
            8%
          </span>
          <span class="text-secondary">vs last month</span>
        </div>
      </div>

      <div class="bg-white rounded-xl p-6 shadow-card border border-gray-100">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-secondary mb-1">Total Cost</p>
            <h2 class="text-2xl font-bold text-primary">
              ${{ (dashboardData?.totalCost ?? 0) | number:'1.2-2' }}
            </h2>
          </div>
          <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-red-100">
            <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 8c-1.657 0-3 .895-3 2s1.343
                       2 3 2 3 .895 3 2-1.343 2-3
                       2m0-8c1.11 0 2.08.402 2.599
                       1M12 8V7m0 1v8m0 0v1m0-1c-1.11
                       0-2.08-.402-2.599-1M21 12a9 9
                       0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
        </div>
        <div class="mt-4 flex items-center space-x-2 text-sm">
          <span class="text-red-600 bg-red-50 px-2 py-1 rounded-full">
            <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                    d="M12 13a1 1 0 100 2h5a1 1 0
                       001-1V9a1 1 0 10-2 0v2.586l-4.293
                       -4.293a1 1 0 00-1.414 0L8
                       9.586 3.707 5.293a1 1 0
                       00-1.414 1.414l5 5a1 1 0
                       001.414 0L11 9.414 14.586
                       13H12z" clip-rule="evenodd" />
            </svg>
            5%
          </span>
          <span class="text-secondary">vs last month</span>
        </div>
      </div>

      <div class="bg-white rounded-xl p-6 shadow-card border border-gray-100">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm text-secondary mb-1">Total Revenue</p>
            <h2 class="text-2xl font-bold text-primary">
              ${{ (dashboardData?.totalRevenue ?? 0) | number:'1.2-2' }}
            </h2>
          </div>
          <div class="flex h-12 w-12 items-center justify-center rounded-xl">
            <svg width="65" height="65" viewBox="0 0 65 65" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M30.4688 21.2523C27.9338 21.9456
                       26.4062 23.8929 26.4062 25.7292C26.4062
                       27.5654 27.9338 29.5127 30.4688
                       30.2033V21.2523ZM34.5312 34.7967V43.745C37.0662
                       43.0544 38.5938 41.1071 38.5938
                       39.2708C38.5938 37.4346 37.0662
                       35.4873 34.5312 34.7967Z" fill="#6597FF" />
              <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M59.5833 32.5C59.5833 47.4581
                       47.4581 59.5833 32.5 59.5833C17.5419
                       59.5833 5.41667 47.4581 5.41667
                       32.5C5.41667 17.5419 17.5419
                       5.41666 32.5 5.41666C47.4581
                       5.41666 59.5833 17.5419 59.5833 32.5ZM32.5
                       14.2187C33.0387 14.2187 33.5554
                       14.4327 33.9363 14.8137C34.3172
                       15.1946 34.5313 15.7113 34.5313
                       16.25V17.1085C38.9458 17.8994
                       42.6563 21.2171 42.6563 25.7292C42.6563
                       26.2679 42.4422 26.7845 42.0613
                       27.1655C41.6804 27.5464 41.1637
                       27.7604 40.625 27.7604C40.0863
                       27.7604 39.5696 27.5464 39.1887
                       27.1655C38.8078 26.7845 38.5938
                       26.2679 38.5938 25.7292C38.5938
                       23.8929 37.0663 21.9456 34.5313
                       21.2523V30.6502C38.9458 31.441
                       42.6563 34.7587 42.6563 39.2708C42.6563
                       43.7829 38.9458 47.1006 34.5313
                       47.8915V48.75C34.5313 49.2887
                       34.3172 49.8054 33.9363 50.1863C33.5554
                       50.5672 33.0387 50.7812 32.5
                       50.7812C31.9613 50.7812 31.4446
                       50.5672 31.0637 50.1863C30.6828
                       49.8054 30.4688 49.2887 30.4688
                       48.75V47.8915C26.0542 47.1006
                       22.3438 43.7829 22.3438 39.2708C22.3438
                       38.7321 22.5578 38.2155 22.9387
                       37.8345C23.3196 37.4536 23.8363
                       37.2396 24.375 37.2396C24.9137
                       37.2396 25.4304 37.4536 25.8113
                       37.8345C26.1922 38.2155 26.4063
                       38.7321 26.4063 39.2708C26.4063
                       41.1071 27.9338 43.0544 30.4688
                       43.745V34.3498C26.0542 33.5589
                       22.3438 30.2412 22.3438 25.7292C22.3438
                       21.2171 26.0542 17.8994 30.4688
                       17.1085V16.25C30.4688 15.7113
                       30.6828 15.1946 31.0637 14.8137C31.4446
                       14.4327 31.9613 14.2187 32.5 14.2187Z"
                    fill="#6597FF" />
            </svg>
          </div>
        </div>
        <div class="mt-4 flex items-center space-x-2 text-sm">
          <span class="text-green-600 bg-green-50 px-2 py-1 rounded-full">
            <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                    d="M12 7a1 1 0 110-2h5a1 1 0
                       011 1v5a1 1 0 11-2 0V8.414l-4.293
                       4.293a1 1 0 01-1.414 0L8 10.414l-4.293
                       4.293a1 1 0 01-1.414-1.414l5-5a1 1 0
                       011.414 0L11 10.586 14.586 7H12z"
                    clip-rule="evenodd" />
            </svg>
            15%
          </span>
          <span class="text-secondary">vs last month</span>
        </div>
      </div>

      <div class="bg-white rounded-xl p-6 shadow-card border border-gray-100">
        <div class="flex items-center justify-between">
          <div class="space-y-2">
            <p class="text-sm text-secondary mb-1">Customers</p>
            <div class="flex items-center space-x-4">
              <div>
                <p class="text-xs text-secondary">New</p>
                <p class="text-lg font-bold text-primary">{{ dashboardData?.customerStats?.newCustomers || 0 }}</p>
              </div>
              <div>
                <p class="text-xs text-secondary">Return</p>
                <p class="text-lg font-bold text-primary">{{ dashboardData?.customerStats?.returningCustomers || 0 }}</p>
              </div>
              <div>
                <p class="text-xs text-secondary">Old</p>
                <p class="text-lg font-bold text-primary">{{ dashboardData?.customerStats?.oldCustomers || 0 }}</p>
              </div>
            </div>
          </div>
          <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-purple-100">
            <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M17 20h5v-2a3 3 0 00-5.356-1.857M17
                       20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7
                       20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0
                       0a5.002 5.002 0 019.288
                       0M15 7a3 3 0 11-6 0 3 3 0
                       016 0zm6 3a2 2 0 11-4 0 2 2
                       0 014 0zM7 10a2 2 0 11-4 0
                       2 2 0 014 0z" />
            </svg>
          </div>
        </div>
        <div class="mt-4 flex items-center space-x-2 text-sm">
          <span class="text-green-600 bg-green-50 px-2 py-1 rounded-full">
            <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                    d="M12 7a1 1 0 110-2h5a1 1 0
                       011 1v5a1 1 0 11-2 0V8.414l-4.293
                       4.293a1 1 0 01-1.414 0L8 10.414l-4.293
                       4.293a1 1 0 01-1.414-1.414l5-5a1 1 0
                       011.414 0L11 10.586 14.586 7H12z"
                    clip-rule="evenodd" />
            </svg>
            9%
          </span>
          <span class="text-secondary">vs last month</span>
        </div>
      </div>
    </div>

    <div class="h-96">
      <canvas #trendChartRef></canvas>
    </div>


    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <div class="bg-white rounded-xl p-6 shadow-card border border-gray-100 lg:col-span-2">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-lg font-semibold text-fontColor">Top Selling Products</h3>
          <a href="#" class="flex items-center text-primary hover:text-primary/80">
            <span>View All</span>
            <svg class="w-4 h-4 ml-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                    d="M7.293 14.707a1 1 0 010-1.414L10.586
                       10 7.293 6.707a1 1 0 011.414-1.414l4
                       4a1 1 0 010 1.414l-4 4a1 1 0
                       01-1.414 0z" clip-rule="evenodd" />
            </svg>
          </a>
        </div>
        <div class="space-y-6">
          <div *ngFor="let product of productsData"
               class="flex items-center justify-between p-4 hover:bg-gray-50 rounded-lg">
            <div class="flex items-center space-x-4">
              <div class="flex h-12 w-12 items-center justify-center rounded-lg bg-thrid/10">
                <svg class="w-6 h-6 text-thrid" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0
                           110 4M5 8v10a2 2 0 002 2h10a2 2 0
                           002-2V8m-9 4h4" />
                </svg>
              </div>
              <div>
                <p class="font-medium text-fontColor">{{ product?.product?.name || 'N/A' }}</p>
                <p class="text-sm text-secondary">
                  {{ product?.product?.category?.name || 'Uncategorized' }}
                </p>
              </div>
            </div>
            <div class="text-right">
              <p class="font-medium text-fontColor">
                ${{ (product?.revenue || 0) | number:'1.2-2' }}
              </p>
              <p class="text-sm text-secondary">{{ product?.salesCount || 0 }} sales</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
